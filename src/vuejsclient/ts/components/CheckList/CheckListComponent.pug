include ../../../views/mixins/loading.pug

.rootElt.checklist
    +loading()
        template(v-for='checklist_item in checklistitems')
            Checklistitem(
                :checklist_item='checklist_item' 
                :ordered_checkpoints='ordered_checkpoints' 
                :checklistitemcheckpoints='checklistitemcheckpoints[checklistitem.id]'
                :global_route_path='global_route_path')

        #checklist_item_modal.modal.fade.in(ref="checklist_item_modal", tabindex='-1', role='dialog')
            .modal-dialog.modal-lg(role='document')
                .modal-content(v-if="selected_checklist_item")
                    .modal-header
                        h4.modal-title {{ selected_checklist_item.name }}
                        router-link.btn.close(:to="route_path") &times;
                    
                    .modal-body
                        Checklistmodalcomponent(
                            :checklist_item='selected_checklist_item'
                            :checkpoint='selected_checkpoint'
                            :checklist_controller='checklist_controller'
                            :key='selected_checklist_item.id')

                    .modal-footer
                        button.btn.btn-danger(type='button', @click="deleteSelectedItem") {{ label('checklist.checklist_item_modal.delete') }}
                        router-link.btn.btn-default(:to="route_path") {{ label('checklist.checklist_item_modal.close') }}