.root
    .modal.fade.in(ref="bamodal", tabindex='-1', role='dialog')
      .modal-dialog.modal-sm#bamodal(role='document')
        .modal-content
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Cerrar', @click="closeBAModal")
              span(aria-hidden='true') Ã—
            h4.modal-title {{ t('client.planning-store-visits.bamodal.title') }}
          .modal-body.col-md-12
            .col-md-12(:class="'infosContener ' + (seemore ? '' : 'seeless')")
              .col-md-6.infos
                i.seemorl.fa.fa-expand(aria-hidden="true", v-show="!seemore", @click="seemore = !seemore")
                i.seemorl.fa.fa-compress(aria-hidden="true", v-show="seemore", @click="seemore = !seemore")
                field(isreadonly="true", :name="t('client.planning-store-visits.bamodal.boutiqueanimee')", :value="ba.nom")
                field(isreadonly="true", :name="t('client.planning-store-visits.bamodal.animateur')", :value="animateurname", v-show="!managername")
                field(isreadonly="true", :name="t('client.planning-store-visits.bamodal.animateurAndManager')", :value="animateurAndManagerName", v-show="managername")
                .adresse(v-show="ba.adresse")
                  ba-infos(:title="t('client.planning-store-visits.bamodal.adresse')", :content="ba.adresse")
                .contact(v-show='ba.infos_contact')
                  ba-infos(:title="t('client.planning-store-visits.bamodal.contact')", :content="ba.infos_contact")
              .col-md-6.map(v-show='ba.adresse')
                .mapouter(style="overflow:hidden;height:346px;width:346px;")
                  .gmap_canvas(style="background:none!important;height:346px;width:346px;")
                    iframe(width="346", height="346", id="gmap_canvas", :src="'https://maps.google.com/maps?q=' + GmapQ + '&t=&z=14&ie=UTF8&iwloc=&output=embed'", frameborder="0", scrolling="no", marginheight="0",   marginwidth="0")
                .horaires(v-show='ba.infos_horaires')
                  ba-infos(:title="t('client.planning-store-visits.bamodal.horaires')", :content="ba.infos_horaires")
            .col-md-12.crsandnew
              label {{ t('client.planning-store-visits.bamodal.rdvpris') }}
                input(type="checkbox", v-model="rdvpris", set_value_in="rdvpris")
              .crs(v-if="!edited_cr")
                .cr(v-for="(cr, i) in crs")
                  i.fa.fa-trash(aria-hidden="true", @click="deleteCR(cr)")
                  i.fa.fa-pencil(aria-hidden="true", @click="editCR(cr)")
                  h5(v-show="getCRRapporteur(cr)") {{getCRRapporteur(cr)}}
                  i {{getCRDate(cr)}}
                  .pointschiffres
                    cr-field(:title="t('client.planning-store-visits.bamodal.newcr_pointschiffres')", :content="cr.pointschiffres", :previsite="true")
                  .objectif
                    cr-field(:title="t('client.planning-store-visits.bamodal.newcr_objectifvisite')", :content="cr.objectif", :previsite="true")
                  .actions
                    cr-field(:title="t('client.planning-store-visits.bamodal.newcr_actionsmenees')", :content="cr.actions", :previsite="false")
                  .plan_action
                    cr-field(:title="t('client.planning-store-visits.bamodal.newcr_plandaction')", :content="cr.plan_action", :previsite="false")
                  .resultats
                    cr-field(:title="t('client.planning-store-visits.bamodal.newcr_resultats')", :content="cr.resultats", :previsite="false")
                  .divers
                    cr-field(:title="t('client.planning-store-visits.bamodal.newcr_divers')", :content="cr.divers")
              h3(v-if="(!selected_event) || (!selected_event.id)") {{ t('client.planning-store-visits.bamodal.needsave') }}
              .newcr(v-show="selected_event && selected_event.id && canaddcr", :class="(newcr_seemore ? '' : 'newcr_seeless')")
                i.newcr_seemorl.fa.fa-expand(aria-hidden="true", v-show="!newcr_seemore", @click="newcr_seemore = !newcr_seemore")
                i.newcr_seemorl.fa.fa-compress(aria-hidden="true", v-show="newcr_seemore", @click="newcr_seemore = !newcr_seemore")
                h3 {{ t('client.planning-store-visits.bamodal.newcr_title') }}

                h4
                  span.cr_previsite {{ t('client.planning-store-visits.bamodal.cr_previsite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_pointschiffres') }}
                quill-editor(v-model="newcr_pointschiffres")

                h4
                  span.cr_previsite {{ t('client.planning-store-visits.bamodal.cr_previsite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_objectifvisite') }}
                quill-editor(v-model="newcr_objectifvisite")

                h4
                  span.cr_visite {{ t('client.planning-store-visits.bamodal.cr_visite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_actionsmenees') }}
                quill-editor(v-model="newcr_actionsmenees")

                h4
                  span.cr_visite {{ t('client.planning-store-visits.bamodal.cr_visite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_plandaction') }}
                quill-editor(v-model="newcr_plandaction")

                h4
                  span.cr_visite {{ t('client.planning-store-visits.bamodal.cr_visite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_resultats') }}
                quill-editor(v-model="newcr_resultats")

                h4
                  span {{ t('client.planning-store-visits.bamodal.newcr_divers') }}
                quill-editor(v-model="newcr_divers")

                button.btn.btn-default(type='button', @click="ajouterCR()") {{ t('client.planning-store-visits.bamodal.ajoutercr') }}
              .newcr(v-show="selected_event && selected_event.id", v-if="edited_cr", :class="(newcr_seemore ? '' : 'newcr_seeless')")
                i.newcr_seemorl.fa.fa-expand(aria-hidden="true", v-show="!newcr_seemore", @click="newcr_seemore = !newcr_seemore")
                i.newcr_seemorl.fa.fa-compress(aria-hidden="true", v-show="newcr_seemore", @click="newcr_seemore = !newcr_seemore")
                h3 {{ t('client.planning-store-visits.bamodal.editcr_title') }}

                h4
                  span.cr_previsite {{ t('client.planning-store-visits.bamodal.cr_previsite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_pointschiffres') }}
                quill-editor(v-model="edited_cr.pointschiffres")

                h4
                  span.cr_previsite {{ t('client.planning-store-visits.bamodal.cr_previsite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_objectifvisite') }}
                quill-editor(v-model="edited_cr.objectif")

                h4
                  span.cr_visite {{ t('client.planning-store-visits.bamodal.cr_visite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_actionsmenees') }}
                quill-editor(v-model="edited_cr.actions")

                h4
                  span.cr_visite {{ t('client.planning-store-visits.bamodal.cr_visite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_plandaction') }}
                quill-editor(v-model="edited_cr.plan_action")

                h4
                  span.cr_visite {{ t('client.planning-store-visits.bamodal.cr_visite_prefix') }}
                  span {{ t('client.planning-store-visits.bamodal.newcr_resultats') }}
                quill-editor(v-model="edited_cr.resultats")

                h4
                  span {{ t('client.planning-store-visits.bamodal.newcr_divers') }}
                quill-editor(v-model="edited_cr.divers")

                button.btn.btn-default(type='button', @click="updateCR(edited_cr)") {{ t('client.planning-store-visits.bamodal.editcr') }}
                button.btn.btn-default(type='button', @click="cancelEditCR()") {{ t('client.planning-store-visits.bamodal.editcr_cancel') }}
            .clearboth

          .modal-footer
            button.btn.btn-danger(type='button', data-dismiss='modal', @click="deleteSelectedEvent()", v-if="caneditplanning") {{ t('client.planning-store-visits.bamodal.supprimer') }}
            button.btn.btn-default(type='button', data-dismiss='modal', @click="closeBAModal()") {{ t('client.planning-store-visits.bamodal.close') }}